P8105: Data Science I
================
Assignment 5<br>Jimmy Kelliher (UNI: jmk2303)

<!------------------------------------------------------------------------------
Preamble
------------------------------------------------------------------------------->
<!------------------------------------------------------------------------------
Problem 1
------------------------------------------------------------------------------->
<!------------------------------------------------------------------------------
Problem 2
------------------------------------------------------------------------------->

``` r
# create tidy dataset for longitudinal study
longData <-
  # create data frame with file names
  tibble(files = list.files("datasets/longitudinal_study")) %>%
  # add a column where each row contains the contents of the corresponding file
  mutate(raw_data = map(
      .x = files
    , ~read_csv(paste0("datasets/longitudinal_study/", .x))
  )) %>%
  # unnest the nested data frames to create an un-tidied, but usable data frame
  unnest(cols = raw_data) %>%
  # pivot longer via week number
  pivot_longer(
      cols         = starts_with("week_")
    , names_to     = "week"
    , names_prefix = "week_"
  ) %>%
  # separate file name into arm type and subject id; use sensible classes
  mutate(
      arm        = factor(recode(
        substr(files, 1, 3)
      , con = "Control"
      , exp = "Experimental"
    ))
    , subject_id = as.integer(substr(files, 5, 6))
    , week       = as.integer(week)
  ) %>%
  # remove file name column now that it is redundant
  select(  arm, subject_id, week, value) %>%
  # relocate columns by group hierarchy
  relocate(arm, subject_id, week, value)

# output tidied dataset
head(longData, 10) %>% knitr::kable()
```

| arm     | subject\_id | week | value |
|:--------|------------:|-----:|------:|
| Control |           1 |    1 |  0.20 |
| Control |           1 |    2 | -1.31 |
| Control |           1 |    3 |  0.66 |
| Control |           1 |    4 |  1.96 |
| Control |           1 |    5 |  0.23 |
| Control |           1 |    6 |  1.09 |
| Control |           1 |    7 |  0.05 |
| Control |           1 |    8 |  1.94 |
| Control |           2 |    1 |  1.13 |
| Control |           2 |    2 | -0.88 |

``` r
# create a spaghetti chart of the data
longData %>%
  ggplot(aes(x = week, y = value, group = subject_id)) +
  geom_line() +
  facet_grid(~arm) +
  labs(
      title = "Value over Time, by Arm"
    , x     = "Week"
    , y     = "Value"
  )
```

<img src="p8105_hw5_jmk2303_files/figure-gfm/unnamed-chunk-3-1.png" width="90%" />
